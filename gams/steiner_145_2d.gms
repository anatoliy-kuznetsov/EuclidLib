Sets
i Steiner points / 1*143 /
j terminals / 1*145 /
k dimensions / 1*2 /;
Alias(i,ii);
Parameters terminals(j,k);
terminals('1', '1') = 0.542696363793199; terminals('1', '2') = 0.3383168941760192; 
terminals('2', '1') = 0.49074624920717747; terminals('2', '2') = 0.0059280554399501195; 
terminals('3', '1') = 0.2469515207519326; terminals('3', '2') = 0.5757414586192589; 
terminals('4', '1') = 0.1147476140395729; terminals('4', '2') = 0.12141109131007988; 
terminals('5', '1') = 0.6982383047068432; terminals('5', '2') = 0.6424609122063196; 
terminals('6', '1') = 0.5461227802413693; terminals('6', '2') = 0.411696622874717; 
terminals('7', '1') = 0.46962930248001555; terminals('7', '2') = 0.03069077664119213; 
terminals('8', '1') = 0.1295978498906757; terminals('8', '2') = 0.4972195173136912; 
terminals('9', '1') = 0.29933820023519075; terminals('9', '2') = 0.8175587245108731; 
terminals('10', '1') = 0.5696788413898236; terminals('10', '2') = 0.5657250489654302; 
terminals('11', '1') = 0.8629785955494148; terminals('11', '2') = 0.23432340123151219; 
terminals('12', '1') = 0.270031933816436; terminals('12', '2') = 0.2760578565269295; 
terminals('13', '1') = 0.8902222254751684; terminals('13', '2') = 0.7602419757187281; 
terminals('14', '1') = 0.606296474700572; terminals('14', '2') = 0.7925261030076276; 
terminals('15', '1') = 0.18063253442668536; terminals('15', '2') = 0.07187565083415115; 
terminals('16', '1') = 0.421514556934245; terminals('16', '2') = 0.7191407496506818; 
terminals('17', '1') = 0.2582156268789674; terminals('17', '2') = 0.09480561089732531; 
terminals('18', '1') = 0.1464842789651225; terminals('18', '2') = 0.4153562527719362; 
terminals('19', '1') = 0.052769631690416485; terminals('19', '2') = 0.44059799102331965; 
terminals('20', '1') = 0.7160856052134618; terminals('20', '2') = 0.6988072183816034; 
terminals('21', '1') = 0.6475821132123823; terminals('21', '2') = 0.6494028482712297; 
terminals('22', '1') = 0.09927563178014831; terminals('22', '2') = 0.043696368712017764; 
terminals('23', '1') = 0.8361585045995071; terminals('23', '2') = 0.34180308085142663; 
terminals('24', '1') = 0.0369636149668906; terminals('24', '2') = 0.652890046752257; 
terminals('25', '1') = 0.6935603461269024; terminals('25', '2') = 0.17228901583121348; 
terminals('26', '1') = 0.1036643410574537; terminals('26', '2') = 0.6476556082434609; 
terminals('27', '1') = 0.004931817239578029; terminals('27', '2') = 0.7810322286297119; 
terminals('28', '1') = 0.6795276484813887; terminals('28', '2') = 0.02473736878449151; 
terminals('29', '1') = 0.23717942349514654; terminals('29', '2') = 0.5263147786470702; 
terminals('30', '1') = 0.6876521089417513; terminals('30', '2') = 0.16843892469863042; 
terminals('31', '1') = 0.20177379921825156; terminals('31', '2') = 0.6191122996792774; 
terminals('32', '1') = 0.898510405765144; terminals('32', '2') = 0.18250982860701537; 
terminals('33', '1') = 0.1554904612908935; terminals('33', '2') = 0.48270326681144915; 
terminals('34', '1') = 0.769100932975437; terminals('34', '2') = 0.8617238140654567; 
terminals('35', '1') = 0.008892315207627566; terminals('35', '2') = 0.8765195531106886; 
terminals('36', '1') = 0.46364442880182266; terminals('36', '2') = 0.09717510189603651; 
terminals('37', '1') = 0.9258952089037744; terminals('37', '2') = 0.21959895541948682; 
terminals('38', '1') = 0.35362065602918946; terminals('38', '2') = 0.787248671132653; 
terminals('39', '1') = 0.8929981309221637; terminals('39', '2') = 0.7875345878142944; 
terminals('40', '1') = 0.4778973653699389; terminals('40', '2') = 0.7180365614659983; 
terminals('41', '1') = 0.8661055278066133; terminals('41', '2') = 0.5771195158369166; 
terminals('42', '1') = 0.891767058098428; terminals('42', '2') = 0.26389443577016414; 
terminals('43', '1') = 0.14793208467191665; terminals('43', '2') = 0.2194613166538254; 
terminals('44', '1') = 0.4005096521999686; terminals('44', '2') = 0.5534181626615818; 
terminals('45', '1') = 0.6727678436249998; terminals('45', '2') = 0.26544972741235406; 
terminals('46', '1') = 0.30023502872276875; terminals('46', '2') = 0.9105942866755732; 
terminals('47', '1') = 0.47714730710189146; terminals('47', '2') = 0.8630093686778924; 
terminals('48', '1') = 0.4011748084857444; terminals('48', '2') = 0.34923725802281724; 
terminals('49', '1') = 0.563395120577734; terminals('49', '2') = 0.9449056766356434; 
terminals('50', '1') = 0.019172364418761356; terminals('50', '2') = 0.7918732532880874; 
terminals('51', '1') = 0.9293371998735839; terminals('51', '2') = 0.3145241294049065; 
terminals('52', '1') = 0.5385389017915889; terminals('52', '2') = 0.5678280233028139; 
terminals('53', '1') = 0.12087983847398354; terminals('53', '2') = 0.07665055111596408; 
terminals('54', '1') = 0.8280002091239856; terminals('54', '2') = 0.7555451716071961; 
terminals('55', '1') = 0.03864517160205139; terminals('55', '2') = 0.14396608510884124; 
terminals('56', '1') = 0.39726208474278746; terminals('56', '2') = 0.4282420643835958; 
terminals('57', '1') = 0.8732837188269942; terminals('57', '2') = 0.5318088115223415; 
terminals('58', '1') = 0.1234033728638606; terminals('58', '2') = 0.7235795798680426; 
terminals('59', '1') = 0.3882308322774247; terminals('59', '2') = 0.011324239067909914; 
terminals('60', '1') = 0.6417679588142895; terminals('60', '2') = 0.40823092505429626; 
terminals('61', '1') = 0.3755286186703286; terminals('61', '2') = 0.628516238187587; 
terminals('62', '1') = 0.7863807403868064; terminals('62', '2') = 0.4942673042448039; 
terminals('63', '1') = 0.10566273919185576; terminals('63', '2') = 0.8551275061231348; 
terminals('64', '1') = 0.6469188854351811; terminals('64', '2') = 0.6289447963149051; 
terminals('65', '1') = 0.5960239961835597; terminals('65', '2') = 0.9650515258813296; 
terminals('66', '1') = 0.5573806554426155; terminals('66', '2') = 0.8850471958791633; 
terminals('67', '1') = 0.994248083972019; terminals('67', '2') = 0.2954439572982639; 
terminals('68', '1') = 0.25730833696222355; terminals('68', '2') = 0.7248587506164921; 
terminals('69', '1') = 0.15787879671805616; terminals('69', '2') = 0.13683385065002218; 
terminals('70', '1') = 0.39803690188832175; terminals('70', '2') = 0.7755020071504337; 
terminals('71', '1') = 0.8632764745538155; terminals('71', '2') = 0.5539662616768634; 
terminals('72', '1') = 0.4603665292040039; terminals('72', '2') = 0.23802457675362465; 
terminals('73', '1') = 0.1583088673521882; terminals('73', '2') = 0.7435968112817375; 
terminals('74', '1') = 0.692812052522524; terminals('74', '2') = 0.23329220050456634; 
terminals('75', '1') = 0.7664179921512463; terminals('75', '2') = 0.4617785634326741; 
terminals('76', '1') = 0.45101047601822564; terminals('76', '2') = 0.1337984736913168; 
terminals('77', '1') = 0.8608089411183685; terminals('77', '2') = 0.9813451405664263; 
terminals('78', '1') = 0.9426334402787611; terminals('78', '2') = 0.2591614704654519; 
terminals('79', '1') = 0.9210801047892726; terminals('79', '2') = 0.8504813711835673; 
terminals('80', '1') = 0.35194154915251796; terminals('80', '2') = 0.5169606815256409; 
terminals('81', '1') = 0.37196547609453423; terminals('81', '2') = 0.7089987581527974; 
terminals('82', '1') = 0.7798714954182607; terminals('82', '2') = 0.42251179090205715; 
terminals('83', '1') = 0.3377757759296046; terminals('83', '2') = 0.6549184263847778; 
terminals('84', '1') = 0.7167085084508799; terminals('84', '2') = 0.17015289896498664; 
terminals('85', '1') = 0.0659622672603476; terminals('85', '2') = 0.9021308611223315; 
terminals('86', '1') = 0.8617006943228629; terminals('86', '2') = 0.4940656820241187; 
terminals('87', '1') = 0.6301616883394882; terminals('87', '2') = 0.8011316911687328; 
terminals('88', '1') = 0.3393197477965939; terminals('88', '2') = 0.5754207671862143; 
terminals('89', '1') = 0.004854457459558037; terminals('89', '2') = 0.653736032189126; 
terminals('90', '1') = 0.4229570708500062; terminals('90', '2') = 0.13553103481642959; 
terminals('91', '1') = 0.5869566383260438; terminals('91', '2') = 0.17490679828870115; 
terminals('92', '1') = 0.3317315631733204; terminals('92', '2') = 0.9025042405010333; 
terminals('93', '1') = 0.8394767914322847; terminals('93', '2') = 0.25129587375777296; 
terminals('94', '1') = 0.03269678751852667; terminals('94', '2') = 0.13992867134826414; 
terminals('95', '1') = 0.7012360780021106; terminals('95', '2') = 0.7892277030743802; 
terminals('96', '1') = 0.1624294934442707; terminals('96', '2') = 0.7897349666971798; 
terminals('97', '1') = 0.6305980612416303; terminals('97', '2') = 0.18791639359150925; 
terminals('98', '1') = 0.44870530013874455; terminals('98', '2') = 0.1841890037752245; 
terminals('99', '1') = 0.766098512193835; terminals('99', '2') = 0.7399882897744617; 
terminals('100', '1') = 0.7680243734746732; terminals('100', '2') = 0.6247807406205957; 
terminals('101', '1') = 0.4165154467940346; terminals('101', '2') = 0.831362551980473; 
terminals('102', '1') = 0.5967540128617678; terminals('102', '2') = 0.4789128442526619; 
terminals('103', '1') = 0.9500717437858464; terminals('103', '2') = 0.19631364630221637; 
terminals('104', '1') = 0.8616284923081408; terminals('104', '2') = 0.25223690315596015; 
terminals('105', '1') = 0.6575418753678898; terminals('105', '2') = 0.45614783146404425; 
terminals('106', '1') = 0.3315326981354004; terminals('106', '2') = 0.6826872934620534; 
terminals('107', '1') = 0.3265313731775602; terminals('107', '2') = 0.4763057301941339; 
terminals('108', '1') = 0.7824023208050283; terminals('108', '2') = 0.4126413790141299; 
terminals('109', '1') = 0.9901855108620253; terminals('109', '2') = 0.5504730296576894; 
terminals('110', '1') = 0.9975378550167815; terminals('110', '2') = 0.5693563579669808; 
terminals('111', '1') = 0.6922033147992993; terminals('111', '2') = 0.12687300507126964; 
terminals('112', '1') = 0.3788718657425906; terminals('112', '2') = 0.40808018646710964; 
terminals('113', '1') = 0.4687974423780289; terminals('113', '2') = 0.3046464879503704; 
terminals('114', '1') = 0.9060514245319318; terminals('114', '2') = 0.8927081938214207; 
terminals('115', '1') = 0.46083133593213965; terminals('115', '2') = 0.7614736144063586; 
terminals('116', '1') = 0.12882787796547734; terminals('116', '2') = 0.3593579474463542; 
terminals('117', '1') = 0.18508563461180283; terminals('117', '2') = 0.7106357380202332; 
terminals('118', '1') = 0.03671555583945174; terminals('118', '2') = 0.10929758839637593; 
terminals('119', '1') = 0.40640575222762987; terminals('119', '2') = 0.28979936614216284; 
terminals('120', '1') = 0.26945073378233964; terminals('120', '2') = 0.9687603082593276; 
terminals('121', '1') = 0.36674530267326866; terminals('121', '2') = 0.9592493907267602; 
terminals('122', '1') = 0.48169487075956074; terminals('122', '2') = 0.6556642500446689; 
terminals('123', '1') = 0.7252158784397955; terminals('123', '2') = 0.9730141486939629; 
terminals('124', '1') = 0.7617413830336309; terminals('124', '2') = 0.6298998811578833; 
terminals('125', '1') = 0.9874851387209143; terminals('125', '2') = 0.15664453341246276; 
terminals('126', '1') = 0.9727425437649908; terminals('126', '2') = 0.021218248872542755; 
terminals('127', '1') = 0.36231468410777223; terminals('127', '2') = 0.3720636696084776; 
terminals('128', '1') = 0.2450591455558162; terminals('128', '2') = 0.24878146676360713; 
terminals('129', '1') = 0.09320107354360474; terminals('129', '2') = 0.9089014020117749; 
terminals('130', '1') = 0.3213658895290008; terminals('130', '2') = 0.3009296366369658; 
terminals('131', '1') = 0.7867620598208739; terminals('131', '2') = 0.11388273145109007; 
terminals('132', '1') = 0.6449832103226975; terminals('132', '2') = 0.19108774124137762; 
terminals('133', '1') = 0.233213023477577; terminals('133', '2') = 0.28134319432599764; 
terminals('134', '1') = 0.08301274770708944; terminals('134', '2') = 0.34015577647933315; 
terminals('135', '1') = 0.001729634057265006; terminals('135', '2') = 0.8801146889918691; 
terminals('136', '1') = 0.4529378999108409; terminals('136', '2') = 0.03053269527903779; 
terminals('137', '1') = 0.422547224668669; terminals('137', '2') = 0.535105425404449; 
terminals('138', '1') = 0.26939053912697164; terminals('138', '2') = 0.8858792448727956; 
terminals('139', '1') = 0.18620340725477802; terminals('139', '2') = 0.8384759261333528; 
terminals('140', '1') = 0.20882053127262512; terminals('140', '2') = 0.9952921431582538; 
terminals('141', '1') = 0.28730309126861997; terminals('141', '2') = 0.5970434818653921; 
terminals('142', '1') = 0.4117011219356801; terminals('142', '2') = 0.5876186024439627; 
terminals('143', '1') = 0.8468515409462513; terminals('143', '2') = 0.22247799838118398; 
terminals('144', '1') = 0.7196086416562973; terminals('144', '2') = 0.18245409843257832; 
terminals('145', '1') = 0.9774868401188724; terminals('145', '2') = 0.3792502630270358; 
Parameter bigM / 1.4142135623730951 /;
Positive Variables distance_Steiner_Steiner(i,ii), distance_Steiner_terminal(i,j), Steiner_points(i,k);
Steiner_points.up(i,k) = 1; distance_Steiner_Steiner.up(i,ii) = bigM; distance_Steiner_terminal.up(i,j) = bigM;
Binary Variables is_connected_Steiner_Steiner(i,ii), is_connected_Steiner_terminal(i,j);
Variable objective;
Equations objective_definition, distance_Steiner_Steiner_def(i,ii), distance_Steiner_terminal_def(i,j), assignment(j), cardinality(i), Steiner_connectivity(i);
objective_definition.. objective =e= sum(i, sum(ii$(ord(i)<ord(ii)), distance_Steiner_Steiner(i,ii)) + sum(j, distance_Steiner_terminal(i,j)));
distance_Steiner_Steiner_def(i,ii)$(ord(i)<ord(ii)).. distance_Steiner_Steiner(i,ii) =g= sqrt(sum(k, power(Steiner_points(i,k) - Steiner_points(ii,k), 2))) - bigM * (1 - is_connected_Steiner_Steiner(i,ii));
distance_Steiner_terminal_def(i,j).. distance_Steiner_terminal(i,j) =g= sqrt(sum(k, power(Steiner_points(i,k) - terminals(j,k), 2))) - bigM * (1 - is_connected_Steiner_terminal(i,j));
assignment(j).. sum(i, is_connected_Steiner_terminal(i,j)) =e= 1;
cardinality(i).. sum(j, is_connected_Steiner_terminal(i,j)) + sum(ii$(ord(ii)<ord(i)), is_connected_Steiner_Steiner(ii,i)) + sum(ii$(ord(i)<ord(ii)), is_connected_Steiner_Steiner(i,ii)) =e= 3;
Steiner_connectivity(i)$(ord(i)>1).. sum(ii$(ord(ii)<ord(i)), is_connected_Steiner_Steiner(ii,i)) =e= 1;
Model m / all /;
Solve m using minlp minimizing objective;
