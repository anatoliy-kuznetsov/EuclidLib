Sets
i Steiner points / 1*93 /
j terminals / 1*95 /
k dimensions / 1*3 /;
Alias(i,ii);
Parameters terminals(j,k);
terminals('1', '1') = 0.5808075761956797; terminals('1', '2') = 0.387618739656449; terminals('1', '3') = 0.5860808451365341; 
terminals('2', '1') = 0.09344623425833509; terminals('2', '2') = 0.3468481927687139; terminals('2', '3') = 0.8604976941236874; 
terminals('3', '1') = 0.0492539880171764; terminals('3', '2') = 0.4778718637784264; terminals('3', '3') = 0.14330898160858496; 
terminals('4', '1') = 0.6372503467483809; terminals('4', '2') = 0.631766372815637; terminals('4', '3') = 0.2729911834331936; 
terminals('5', '1') = 0.876893028636005; terminals('5', '2') = 0.12315102937038425; terminals('5', '3') = 0.7414457124531405; 
terminals('6', '1') = 0.5337860012555535; terminals('6', '2') = 0.7511698471592498; terminals('6', '3') = 0.9220382931343205; 
terminals('7', '1') = 0.7518462032537753; terminals('7', '2') = 0.7821471022983525; terminals('7', '3') = 0.28609164060619985; 
terminals('8', '1') = 0.9701840392978451; terminals('8', '2') = 0.43239828327235363; terminals('8', '3') = 0.7310110883425335; 
terminals('9', '1') = 0.855542114811776; terminals('9', '2') = 0.1984255813284992; terminals('9', '3') = 0.7052947215602203; 
terminals('10', '1') = 0.8101105052203116; terminals('10', '2') = 0.38585950847465766; terminals('10', '3') = 0.21461892666071725; 
terminals('11', '1') = 0.648588349861218; terminals('11', '2') = 0.4616435675744205; terminals('11', '3') = 0.3537318727286306; 
terminals('12', '1') = 0.4426069306802357; terminals('12', '2') = 0.16401411212425654; terminals('12', '3') = 0.34514340419149336; 
terminals('13', '1') = 0.5074758811697582; terminals('13', '2') = 0.2336341064074069; terminals('13', '3') = 0.2930558255097331; 
terminals('14', '1') = 0.1584189486608767; terminals('14', '2') = 0.20979804401842117; terminals('14', '3') = 0.5302481070564034; 
terminals('15', '1') = 0.2024046199264432; terminals('15', '2') = 0.049773401042818355; terminals('15', '3') = 0.3242330930887539; 
terminals('16', '1') = 0.23961885619213308; terminals('16', '2') = 0.5755616206037635; terminals('16', '3') = 0.2703586968419861; 
terminals('17', '1') = 0.37288719868257325; terminals('17', '2') = 0.35277647380109933; terminals('17', '3') = 0.12102864832021765; 
terminals('18', '1') = 0.6203204362830688; terminals('18', '2') = 0.17031545075914856; terminals('18', '3') = 0.3387102037108065; 
terminals('19', '1') = 0.17115517014051473; terminals('19', '2') = 0.2792268600272848; terminals('19', '3') = 0.401467080604173; 
terminals('20', '1') = 0.5797736095946623; terminals('20', '2') = 0.9094530235501384; terminals('20', '3') = 0.9456211362213468; 
terminals('21', '1') = 0.6061089341993746; terminals('21', '2') = 0.4113876992783668; terminals('21', '3') = 0.7243285992048566; 
terminals('22', '1') = 0.12208802669518393; terminals('22', '2') = 0.008844964033127956; terminals('22', '3') = 0.5543516057619426; 
terminals('23', '1') = 0.5726517112399618; terminals('23', '2') = 0.29056684749605843; terminals('23', '3') = 0.8937726631648435; 
terminals('24', '1') = 0.508030259262153; terminals('24', '2') = 0.3007546097635758; terminals('24', '3') = 0.5701689122478938; 
terminals('25', '1') = 0.22908363580238567; terminals('25', '2') = 0.7906447821029055; terminals('25', '3') = 0.2922518449501992; 
terminals('26', '1') = 0.6958875464881673; terminals('26', '2') = 0.643319180384186; terminals('26', '3') = 0.0017080567988052575; 
terminals('27', '1') = 0.08743414256185611; terminals('27', '2') = 0.4150839694204761; terminals('27', '3') = 0.19633513497160004; 
terminals('28', '1') = 0.6426593837033335; terminals('28', '2') = 0.11266322312224586; terminals('28', '3') = 0.5783059242188114; 
terminals('29', '1') = 0.6728659641535178; terminals('29', '2') = 0.04488643826093752; terminals('29', '3') = 0.6628010586181341; 
terminals('30', '1') = 0.43787704490956825; terminals('30', '2') = 0.4344522659672524; terminals('30', '3') = 0.5454149185925039; 
terminals('31', '1') = 0.1816645109542292; terminals('31', '2') = 0.433361403553137; terminals('31', '3') = 0.9411566586325721; 
terminals('32', '1') = 0.11376315480327548; terminals('32', '2') = 0.333001406252842; terminals('32', '3') = 0.4882672110764559; 
terminals('33', '1') = 0.2863418287183376; terminals('33', '2') = 0.18571712520633044; terminals('33', '3') = 0.8202912483828401; 
terminals('34', '1') = 0.24137986994889538; terminals('34', '2') = 0.570403152504363; terminals('34', '3') = 0.405061733158369; 
terminals('35', '1') = 0.19209736119948373; terminals('35', '2') = 0.38384578483987564; terminals('35', '3') = 0.17986874722441304; 
terminals('36', '1') = 0.8848983531885246; terminals('36', '2') = 0.8178990643023074; terminals('36', '3') = 0.875573760528996; 
terminals('37', '1') = 0.1171345732457536; terminals('37', '2') = 0.876566511924722; terminals('37', '3') = 0.23807676607227524; 
terminals('38', '1') = 0.7146766129670309; terminals('38', '2') = 0.4717424704857812; terminals('38', '3') = 0.09167304688754785; 
terminals('39', '1') = 0.0010649421941985038; terminals('39', '2') = 0.24876719428745808; terminals('39', '3') = 0.8421510778521948; 
terminals('40', '1') = 0.574408636484442; terminals('40', '2') = 0.5272428873834258; terminals('40', '3') = 0.698039627067909; 
terminals('41', '1') = 0.9505331450559633; terminals('41', '2') = 0.7723921106745775; terminals('41', '3') = 0.8631135333174135; 
terminals('42', '1') = 0.34353259730183383; terminals('42', '2') = 0.18876424294174599; terminals('42', '3') = 0.8978355958932824; 
terminals('43', '1') = 0.7397435929989413; terminals('43', '2') = 0.08772909895709469; terminals('43', '3') = 0.8025770278357355; 
terminals('44', '1') = 0.7812600542281112; terminals('44', '2') = 0.48296762728804876; terminals('44', '3') = 0.8791650633072138; 
terminals('45', '1') = 0.8312421427710647; terminals('45', '2') = 0.817768818038337; terminals('45', '3') = 0.9460015029788924; 
terminals('46', '1') = 0.6452629022594275; terminals('46', '2') = 0.739948520898382; terminals('46', '3') = 0.48468462515723576; 
terminals('47', '1') = 0.9398180605153998; terminals('47', '2') = 0.8985603069771186; terminals('47', '3') = 0.8055862804267906; 
terminals('48', '1') = 0.7398057189168961; terminals('48', '2') = 0.01911130277095663; terminals('48', '3') = 0.9999081257408704; 
terminals('49', '1') = 0.994064192349676; terminals('49', '2') = 0.8792072599766492; terminals('49', '3') = 0.8727247736509501; 
terminals('50', '1') = 0.20464190873699606; terminals('50', '2') = 0.056094955682419845; terminals('50', '3') = 0.07730506982536534; 
terminals('51', '1') = 0.5643513840535944; terminals('51', '2') = 0.3280589520786851; terminals('51', '3') = 0.8185624643679638; 
terminals('52', '1') = 0.6676031500739043; terminals('52', '2') = 0.19791467522615314; terminals('52', '3') = 0.8944474191818326; 
terminals('53', '1') = 0.9662279014069534; terminals('53', '2') = 0.7791055534264104; terminals('53', '3') = 0.1562130576094467; 
terminals('54', '1') = 0.028491709116730157; terminals('54', '2') = 0.052811097219078396; terminals('54', '3') = 0.4037940683344716; 
terminals('55', '1') = 0.43834093674086005; terminals('55', '2') = 0.5656759161822492; terminals('55', '3') = 0.7933145751587161; 
terminals('56', '1') = 0.24410872737827094; terminals('56', '2') = 0.7936064566769692; terminals('56', '3') = 0.08601146431647988; 
terminals('57', '1') = 0.30194102994095706; terminals('57', '2') = 0.004832823207504; terminals('57', '3') = 0.2784913978873461; 
terminals('58', '1') = 0.6519179704354351; terminals('58', '2') = 0.5119824905990342; terminals('58', '3') = 0.02641701318719769; 
terminals('59', '1') = 0.8183179478403264; terminals('59', '2') = 0.8232580404048644; terminals('59', '3') = 0.4784652480691076; 
terminals('60', '1') = 0.14160817602197162; terminals('60', '2') = 0.44848192406730014; terminals('60', '3') = 0.8161010170652516; 
terminals('61', '1') = 0.4248450511450028; terminals('61', '2') = 0.12220063370673051; terminals('61', '3') = 0.5099712571969937; 
terminals('62', '1') = 0.5508822395080514; terminals('62', '2') = 0.8182329031214707; terminals('62', '3') = 0.02483946551897165; 
terminals('63', '1') = 0.6625515295910113; terminals('63', '2') = 0.6542862834097791; terminals('63', '3') = 0.04657984249237257; 
terminals('64', '1') = 0.9260711945441853; terminals('64', '2') = 0.5548299399010572; terminals('64', '3') = 0.009407129519477753; 
terminals('65', '1') = 0.6618476299091945; terminals('65', '2') = 0.23616195956731345; terminals('65', '3') = 0.6839597863712353; 
terminals('66', '1') = 0.959484576817843; terminals('66', '2') = 0.4450231216897368; terminals('66', '3') = 0.0954401425471969; 
terminals('67', '1') = 0.5297219069009247; terminals('67', '2') = 0.2736427796475288; terminals('67', '3') = 0.46581856577024305; 
terminals('68', '1') = 0.3258199570008402; terminals('68', '2') = 0.9068840335975864; terminals('68', '3') = 0.9014618795298953; 
terminals('69', '1') = 0.39315443762811775; terminals('69', '2') = 0.6708195136274806; terminals('69', '3') = 0.012179254915341775; 
terminals('70', '1') = 0.7340020101459003; terminals('70', '2') = 0.4765497083862341; terminals('70', '3') = 0.5238670269676349; 
terminals('71', '1') = 0.6139131434557376; terminals('71', '2') = 0.8914777751661561; terminals('71', '3') = 0.523901907372292; 
terminals('72', '1') = 0.42073982113392605; terminals('72', '2') = 0.2378354540977371; terminals('72', '3') = 0.10733116866823122; 
terminals('73', '1') = 0.042062012136601434; terminals('73', '2') = 0.13366446386582442; terminals('73', '3') = 0.742785440067077; 
terminals('74', '1') = 0.036815106775440753; terminals('74', '2') = 0.7910038983179242; terminals('74', '3') = 0.7822889544111677; 
terminals('75', '1') = 0.21220187263729995; terminals('75', '2') = 0.2749487875042006; terminals('75', '3') = 0.9857440636183937; 
terminals('76', '1') = 0.6427238052153563; terminals('76', '2') = 0.6453787398528069; terminals('76', '3') = 0.8160618600399387; 
terminals('77', '1') = 0.021604004542762456; terminals('77', '2') = 0.7590450067868001; terminals('77', '3') = 0.15664048040012346; 
terminals('78', '1') = 0.07693946039811983; terminals('78', '2') = 0.22892018054223895; terminals('78', '3') = 0.4702783066834849; 
terminals('79', '1') = 0.03349255176372068; terminals('79', '2') = 0.0749227353210985; terminals('79', '3') = 0.18365887918244506; 
terminals('80', '1') = 0.6214782486323919; terminals('80', '2') = 0.9254264357743426; terminals('80', '3') = 0.7889159483993065; 
terminals('81', '1') = 0.8568837718554982; terminals('81', '2') = 0.8120819033129666; terminals('81', '3') = 0.8845845459464245; 
terminals('82', '1') = 0.6171503916501061; terminals('82', '2') = 0.7348132052121545; terminals('82', '3') = 0.5196972155121955; 
terminals('83', '1') = 0.4337273602113495; terminals('83', '2') = 0.989407930335483; terminals('83', '3') = 0.6799088214572663; 
terminals('84', '1') = 0.7888591444862495; terminals('84', '2') = 0.5390037468669624; terminals('84', '3') = 0.3771630186211742; 
terminals('85', '1') = 0.755005803987878; terminals('85', '2') = 0.41014028832970073; terminals('85', '3') = 0.36669999762332595; 
terminals('86', '1') = 0.07362371341081564; terminals('86', '2') = 0.5903521460890785; terminals('86', '3') = 0.4677509240133465; 
terminals('87', '1') = 0.6675747918972446; terminals('87', '2') = 0.9707839113784139; terminals('87', '3') = 0.8527235717133225; 
terminals('88', '1') = 0.5786775536396436; terminals('88', '2') = 0.8841880410037658; terminals('88', '3') = 0.9995906833522652; 
terminals('89', '1') = 0.05251843885063123; terminals('89', '2') = 0.33897271635574566; terminals('89', '3') = 0.35097785608916865; 
terminals('90', '1') = 0.6344322255682885; terminals('90', '2') = 0.7242594327532553; terminals('90', '3') = 0.5423067117101031; 
terminals('91', '1') = 0.5249710251163043; terminals('91', '2') = 0.1179445816126986; terminals('91', '3') = 0.01546482242198255; 
terminals('92', '1') = 0.005615657027400522; terminals('92', '2') = 0.7256816201734958; terminals('92', '3') = 0.6561494566016254; 
terminals('93', '1') = 0.6353663572536297; terminals('93', '2') = 0.32900041304929906; terminals('93', '3') = 0.18103813279474346; 
terminals('94', '1') = 0.5556378815808575; terminals('94', '2') = 0.8543483858850609; terminals('94', '3') = 0.6259821658911041; 
terminals('95', '1') = 0.6673750385077921; terminals('95', '2') = 0.4849553785823615; terminals('95', '3') = 0.22116062730506947; 
Parameter bigM / 1.7320508075688772 /;
Positive Variables distance_Steiner_Steiner(i,ii), distance_Steiner_terminal(i,j), Steiner_points(i,k);
Steiner_points.up(i,k) = 1; distance_Steiner_Steiner.up(i,ii) = bigM; distance_Steiner_terminal.up(i,j) = bigM;
Binary Variables is_connected_Steiner_Steiner(i,ii), is_connected_Steiner_terminal(i,j);
Variable objective;
Equations objective_definition, distance_Steiner_Steiner_def(i,ii), distance_Steiner_terminal_def(i,j), assignment(j), cardinality(i), Steiner_connectivity(i);
objective_definition.. objective =e= sum(i, sum(ii$(ord(i)<ord(ii)), distance_Steiner_Steiner(i,ii)) + sum(j, distance_Steiner_terminal(i,j)));
distance_Steiner_Steiner_def(i,ii)$(ord(i)<ord(ii)).. distance_Steiner_Steiner(i,ii) =g= sqrt(sum(k, power(Steiner_points(i,k) - Steiner_points(ii,k), 2))) - bigM * (1 - is_connected_Steiner_Steiner(i,ii));
distance_Steiner_terminal_def(i,j).. distance_Steiner_terminal(i,j) =g= sqrt(sum(k, power(Steiner_points(i,k) - terminals(j,k), 2))) - bigM * (1 - is_connected_Steiner_terminal(i,j));
assignment(j).. sum(i, is_connected_Steiner_terminal(i,j)) =e= 1;
cardinality(i).. sum(j, is_connected_Steiner_terminal(i,j)) + sum(ii$(ord(ii)<ord(i)), is_connected_Steiner_Steiner(ii,i)) + sum(ii$(ord(i)<ord(ii)), is_connected_Steiner_Steiner(i,ii)) =e= 3;
Steiner_connectivity(i)$(ord(i)>1).. sum(ii$(ord(ii)<ord(i)), is_connected_Steiner_Steiner(ii,i)) =e= 1;
Model m / all /;
Solve m using minlp minimizing objective;
