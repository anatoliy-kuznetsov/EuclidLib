Sets
i Steiner points / 1*128 /
j terminals / 1*130 /
k dimensions / 1*2 /;
Alias(i,ii);
Parameters terminals(j,k);
terminals('1', '1') = 0.2106710379682939; terminals('1', '2') = 0.9380328238559007; 
terminals('2', '1') = 0.5667998461953477; terminals('2', '2') = 0.482178779031632; 
terminals('3', '1') = 0.6921704192424565; terminals('3', '2') = 0.6071159746640816; 
terminals('4', '1') = 0.28067318178028355; terminals('4', '2') = 0.41569505680078056; 
terminals('5', '1') = 0.26474460667407274; terminals('5', '2') = 0.9614130167855441; 
terminals('6', '1') = 0.0707151121265176; terminals('6', '2') = 0.9893434542570855; 
terminals('7', '1') = 0.23156734593376105; terminals('7', '2') = 0.7732742734543422; 
terminals('8', '1') = 0.7628950529059627; terminals('8', '2') = 0.27985320941194014; 
terminals('9', '1') = 0.5367732092433625; terminals('9', '2') = 0.5965451420633557; 
terminals('10', '1') = 0.6467752274170386; terminals('10', '2') = 0.372411779688262; 
terminals('11', '1') = 0.8279077309261653; terminals('11', '2') = 0.8181245805793201; 
terminals('12', '1') = 0.3775072307249415; terminals('12', '2') = 0.6867145848811803; 
terminals('13', '1') = 0.7220829306911104; terminals('13', '2') = 0.7342832220144605; 
terminals('14', '1') = 0.3685845360665072; terminals('14', '2') = 0.7118310852405018; 
terminals('15', '1') = 0.6533762678731008; terminals('15', '2') = 0.592805073085458; 
terminals('16', '1') = 0.24625026857026722; terminals('16', '2') = 0.634224095845636; 
terminals('17', '1') = 0.7569077546796499; terminals('17', '2') = 0.9343351725725354; 
terminals('18', '1') = 0.27622085017059816; terminals('18', '2') = 0.4589281122397437; 
terminals('19', '1') = 0.7216276717967004; terminals('19', '2') = 0.017590600245009358; 
terminals('20', '1') = 0.46941724892095715; terminals('20', '2') = 0.9452764500582773; 
terminals('21', '1') = 0.6074779488685781; terminals('21', '2') = 0.9776067560233044; 
terminals('22', '1') = 0.9268186379015223; terminals('22', '2') = 0.9436421270531206; 
terminals('23', '1') = 0.18864028013444678; terminals('23', '2') = 0.9208912473126668; 
terminals('24', '1') = 0.7314713437731547; terminals('24', '2') = 0.4976782180342062; 
terminals('25', '1') = 0.29792175349757; terminals('25', '2') = 0.3500594275918908; 
terminals('26', '1') = 0.6448825450498948; terminals('26', '2') = 0.5576645496902932; 
terminals('27', '1') = 0.6382451411523757; terminals('27', '2') = 0.20956587468676147; 
terminals('28', '1') = 0.6320139941266896; terminals('28', '2') = 0.9175561148832773; 
terminals('29', '1') = 0.1559921936429426; terminals('29', '2') = 0.3409841908722594; 
terminals('30', '1') = 0.6577307948305324; terminals('30', '2') = 0.2777657938873741; 
terminals('31', '1') = 0.14443572426114415; terminals('31', '2') = 0.14364727656465304; 
terminals('32', '1') = 0.06880467275827229; terminals('32', '2') = 0.5085243158092849; 
terminals('33', '1') = 0.43588036862789326; terminals('33', '2') = 0.9713435863263217; 
terminals('34', '1') = 0.5695414814133535; terminals('34', '2') = 0.4280783577446694; 
terminals('35', '1') = 0.3298306422132571; terminals('35', '2') = 0.7088843280198104; 
terminals('36', '1') = 0.8015451633153265; terminals('36', '2') = 0.21772065393846396; 
terminals('37', '1') = 0.6866879485000786; terminals('37', '2') = 0.07237968203725242; 
terminals('38', '1') = 0.940058781730322; terminals('38', '2') = 0.21964320431462347; 
terminals('39', '1') = 0.5916160596265396; terminals('39', '2') = 0.7781762122149978; 
terminals('40', '1') = 0.21407212422639832; terminals('40', '2') = 0.8336924476697815; 
terminals('41', '1') = 0.15440819183697263; terminals('41', '2') = 0.3665868158685286; 
terminals('42', '1') = 0.9844164586117331; terminals('42', '2') = 0.6159088265614614; 
terminals('43', '1') = 0.14231075568033247; terminals('43', '2') = 0.16850407299078884; 
terminals('44', '1') = 0.37692809442522435; terminals('44', '2') = 0.27568355326162464; 
terminals('45', '1') = 0.1632965140384206; terminals('45', '2') = 0.31564703437091357; 
terminals('46', '1') = 0.791210567738616; terminals('46', '2') = 0.3223739532041613; 
terminals('47', '1') = 0.871895092239175; terminals('47', '2') = 0.9847921554381042; 
terminals('48', '1') = 0.581503700855424; terminals('48', '2') = 0.6766761741243248; 
terminals('49', '1') = 0.4976135520146976; terminals('49', '2') = 0.976888807512043; 
terminals('50', '1') = 0.3527354650547849; terminals('50', '2') = 0.26022239932354696; 
terminals('51', '1') = 0.02089869603951744; terminals('51', '2') = 0.18064654854783613; 
terminals('52', '1') = 0.6531434026140133; terminals('52', '2') = 0.16877815280695763; 
terminals('53', '1') = 0.8779593397789593; terminals('53', '2') = 0.31952994605271645; 
terminals('54', '1') = 0.8122725262370806; terminals('54', '2') = 0.23581462716093837; 
terminals('55', '1') = 0.7842438167734226; terminals('55', '2') = 0.5244320347789079; 
terminals('56', '1') = 0.7673716398276781; terminals('56', '2') = 0.050930251260020265; 
terminals('57', '1') = 0.8319213621243454; terminals('57', '2') = 0.6007744244469179; 
terminals('58', '1') = 0.22354039420592675; terminals('58', '2') = 0.02969018031833226; 
terminals('59', '1') = 0.5655480290047902; terminals('59', '2') = 0.5562233442379736; 
terminals('60', '1') = 0.41415299379586157; terminals('60', '2') = 0.4131676816696702; 
terminals('61', '1') = 0.7686206663613182; terminals('61', '2') = 0.15622498016720332; 
terminals('62', '1') = 0.5787263248618617; terminals('62', '2') = 0.15048975297896872; 
terminals('63', '1') = 0.13132945257799167; terminals('63', '2') = 0.04632760246029044; 
terminals('64', '1') = 0.763910568955369; terminals('64', '2') = 0.7256677048272328; 
terminals('65', '1') = 0.9402147551422981; terminals('65', '2') = 0.8361941194918164; 
terminals('66', '1') = 0.15963985126732327; terminals('66', '2') = 0.3933163747529639; 
terminals('67', '1') = 0.3419908538107608; terminals('67', '2') = 0.8899607723703461; 
terminals('68', '1') = 0.5045252907304003; terminals('68', '2') = 0.8149890929443397; 
terminals('69', '1') = 0.8835913773820666; terminals('69', '2') = 0.5640386686149821; 
terminals('70', '1') = 0.03250565668862415; terminals('70', '2') = 0.2723235050705626; 
terminals('71', '1') = 0.8702449703434317; terminals('71', '2') = 0.40071150741666495; 
terminals('72', '1') = 0.8577662747925545; terminals('72', '2') = 0.33718436636394644; 
terminals('73', '1') = 0.9035735228923136; terminals('73', '2') = 0.7768959482374393; 
terminals('74', '1') = 0.5493591542582895; terminals('74', '2') = 0.1042122728255932; 
terminals('75', '1') = 0.38443163841858885; terminals('75', '2') = 0.2358907514004046; 
terminals('76', '1') = 0.8713880550534497; terminals('76', '2') = 0.20295848274990425; 
terminals('77', '1') = 0.03935336265603617; terminals('77', '2') = 0.08044729979813825; 
terminals('78', '1') = 0.7437636393059388; terminals('78', '2') = 0.9098210677134834; 
terminals('79', '1') = 0.27247420981552317; terminals('79', '2') = 0.06799356979165017; 
terminals('80', '1') = 0.39186561530643593; terminals('80', '2') = 0.6791416164060723; 
terminals('81', '1') = 0.6150489163065032; terminals('81', '2') = 0.7768150869980619; 
terminals('82', '1') = 0.98459959267252; terminals('82', '2') = 0.1540956806874253; 
terminals('83', '1') = 0.39237875365428077; terminals('83', '2') = 0.16261788898905105; 
terminals('84', '1') = 0.8835532074781746; terminals('84', '2') = 0.11101005935490138; 
terminals('85', '1') = 0.3253913463102587; terminals('85', '2') = 0.4687380972748747; 
terminals('86', '1') = 0.34816868945404267; terminals('86', '2') = 0.938667883336953; 
terminals('87', '1') = 0.5139411945760686; terminals('87', '2') = 0.5580829615947299; 
terminals('88', '1') = 0.29709022169343413; terminals('88', '2') = 0.25332775962602094; 
terminals('89', '1') = 0.31264131738405054; terminals('89', '2') = 0.6926330314424626; 
terminals('90', '1') = 0.04270301406414212; terminals('90', '2') = 0.09056371162703714; 
terminals('91', '1') = 0.2503149132107303; terminals('91', '2') = 0.8486853674004404; 
terminals('92', '1') = 0.3816313990262491; terminals('92', '2') = 0.4652041914651769; 
terminals('93', '1') = 0.6575336340575209; terminals('93', '2') = 0.09316138153410625; 
terminals('94', '1') = 0.6429469110260527; terminals('94', '2') = 0.23929102357280152; 
terminals('95', '1') = 0.1867470821481706; terminals('95', '2') = 0.5525958470131217; 
terminals('96', '1') = 0.0369948427093012; terminals('96', '2') = 0.9696623651489514; 
terminals('97', '1') = 0.40448848515820324; terminals('97', '2') = 0.593045111408661; 
terminals('98', '1') = 0.28124508567268525; terminals('98', '2') = 0.913885259324347; 
terminals('99', '1') = 0.9893930839518179; terminals('99', '2') = 0.24150927018805657; 
terminals('100', '1') = 0.1948195803719841; terminals('100', '2') = 0.7492881907937143; 
terminals('101', '1') = 0.5658424770269935; terminals('101', '2') = 0.14160129282052625; 
terminals('102', '1') = 0.22524259905220934; terminals('102', '2') = 0.6122517054279317; 
terminals('103', '1') = 0.960030734668562; terminals('103', '2') = 0.5531456600306044; 
terminals('104', '1') = 0.9221676489285892; terminals('104', '2') = 0.7389094502260896; 
terminals('105', '1') = 0.11710387578229975; terminals('105', '2') = 0.9727455486426109; 
terminals('106', '1') = 0.8488731841278516; terminals('106', '2') = 0.8467053656903272; 
terminals('107', '1') = 0.09371009287884835; terminals('107', '2') = 0.31411385619969945; 
terminals('108', '1') = 0.1988284978432644; terminals('108', '2') = 0.48961544211003905; 
terminals('109', '1') = 0.8583561484887641; terminals('109', '2') = 0.3186697464384588; 
terminals('110', '1') = 0.6688690039382543; terminals('110', '2') = 0.945310479505673; 
terminals('111', '1') = 0.04624981387251337; terminals('111', '2') = 0.231469167293333; 
terminals('112', '1') = 0.8178163024196056; terminals('112', '2') = 0.02904621642173344; 
terminals('113', '1') = 0.9315040907122351; terminals('113', '2') = 0.7557770948976231; 
terminals('114', '1') = 0.29745109188198504; terminals('114', '2') = 0.9741736291644159; 
terminals('115', '1') = 0.5284674904595384; terminals('115', '2') = 0.7551993462533833; 
terminals('116', '1') = 0.5300270799782542; terminals('116', '2') = 0.38184305844838573; 
terminals('117', '1') = 0.6668005549381493; terminals('117', '2') = 0.8811434765989493; 
terminals('118', '1') = 0.5442813831645835; terminals('118', '2') = 0.3600157236887199; 
terminals('119', '1') = 0.9376821765339066; terminals('119', '2') = 0.3687828622402438; 
terminals('120', '1') = 0.392932006442667; terminals('120', '2') = 0.33952541461568775; 
terminals('121', '1') = 0.7849014555212018; terminals('121', '2') = 0.22477000594279017; 
terminals('122', '1') = 0.6254837169277481; terminals('122', '2') = 0.7034892688192731; 
terminals('123', '1') = 0.4247985314136128; terminals('123', '2') = 0.10369414207023708; 
terminals('124', '1') = 0.28654545614962423; terminals('124', '2') = 0.5021722440245434; 
terminals('125', '1') = 0.3422092502395898; terminals('125', '2') = 0.7935826163050975; 
terminals('126', '1') = 0.8883883263095201; terminals('126', '2') = 0.5546401634397283; 
terminals('127', '1') = 0.7971530763810396; terminals('127', '2') = 0.6875575338887534; 
terminals('128', '1') = 0.8063475333256809; terminals('128', '2') = 0.875525331384171; 
terminals('129', '1') = 0.5016179332523351; terminals('129', '2') = 0.38737021369911806; 
terminals('130', '1') = 0.4626071076281145; terminals('130', '2') = 0.8967522535347754; 
Parameter bigM / 1.4142135623730951 /;
Positive Variables distance_Steiner_Steiner(i,ii), distance_Steiner_terminal(i,j), Steiner_points(i,k);
Steiner_points.up(i,k) = 1; distance_Steiner_Steiner.up(i,ii) = bigM; distance_Steiner_terminal.up(i,j) = bigM;
Binary Variables is_connected_Steiner_Steiner(i,ii), is_connected_Steiner_terminal(i,j);
Variable objective;
Equations objective_definition, distance_Steiner_Steiner_def(i,ii), distance_Steiner_terminal_def(i,j), assignment(j), cardinality(i), Steiner_connectivity(i);
objective_definition.. objective =e= sum(i, sum(ii$(ord(i)<ord(ii)), distance_Steiner_Steiner(i,ii)) + sum(j, distance_Steiner_terminal(i,j)));
distance_Steiner_Steiner_def(i,ii)$(ord(i)<ord(ii)).. distance_Steiner_Steiner(i,ii) =g= sqrt(sum(k, power(Steiner_points(i,k) - Steiner_points(ii,k), 2))) - bigM * (1 - is_connected_Steiner_Steiner(i,ii));
distance_Steiner_terminal_def(i,j).. distance_Steiner_terminal(i,j) =g= sqrt(sum(k, power(Steiner_points(i,k) - terminals(j,k), 2))) - bigM * (1 - is_connected_Steiner_terminal(i,j));
assignment(j).. sum(i, is_connected_Steiner_terminal(i,j)) =e= 1;
cardinality(i).. sum(j, is_connected_Steiner_terminal(i,j)) + sum(ii$(ord(ii)<ord(i)), is_connected_Steiner_Steiner(ii,i)) + sum(ii$(ord(i)<ord(ii)), is_connected_Steiner_Steiner(i,ii)) =e= 3;
Steiner_connectivity(i)$(ord(i)>1).. sum(ii$(ord(ii)<ord(i)), is_connected_Steiner_Steiner(ii,i)) =e= 1;
Model m / all /;
Solve m using minlp minimizing objective;
