Sets
i Steiner points / 1*123 /
j terminals / 1*125 /
k dimensions / 1*2 /;
Alias(i,ii);
Parameters terminals(j,k);
terminals('1', '1') = 0.3875562951104732; terminals('1', '2') = 0.9330186408543529; 
terminals('2', '1') = 0.562146407898091; terminals('2', '2') = 0.06828434544205153; 
terminals('3', '1') = 0.039129157060772246; terminals('3', '2') = 0.24091781626678177; 
terminals('4', '1') = 0.16623538677997673; terminals('4', '2') = 0.374272465036501; 
terminals('5', '1') = 0.408966818926242; terminals('5', '2') = 0.9491220744096723; 
terminals('6', '1') = 0.46110799642576417; terminals('6', '2') = 0.5465610442541805; 
terminals('7', '1') = 0.3100053939363503; terminals('7', '2') = 0.8930209918047177; 
terminals('8', '1') = 0.8110438492002532; terminals('8', '2') = 0.15890591351073435; 
terminals('9', '1') = 0.8185843838314756; terminals('9', '2') = 0.4255449747798262; 
terminals('10', '1') = 0.18971045262009334; terminals('10', '2') = 0.47000904587147163; 
terminals('11', '1') = 0.21368159959326993; terminals('11', '2') = 0.5779239001843863; 
terminals('12', '1') = 0.8414555544986722; terminals('12', '2') = 0.4230008420593674; 
terminals('13', '1') = 0.45646662072852817; terminals('13', '2') = 0.6713135558415345; 
terminals('14', '1') = 0.3851331521479958; terminals('14', '2') = 0.5787742918433331; 
terminals('15', '1') = 0.3397278086386124; terminals('15', '2') = 0.21543911989753128; 
terminals('16', '1') = 0.9349330985634463; terminals('16', '2') = 0.4582540084111467; 
terminals('17', '1') = 0.9202171886613936; terminals('17', '2') = 0.7488198650763622; 
terminals('18', '1') = 0.35809619589496733; terminals('18', '2') = 0.7741816730215779; 
terminals('19', '1') = 0.24747338182046164; terminals('19', '2') = 0.8259591616298335; 
terminals('20', '1') = 0.850596759525343; terminals('20', '2') = 0.7957254800626432; 
terminals('21', '1') = 0.5118548160451059; terminals('21', '2') = 0.8586590765826484; 
terminals('22', '1') = 0.9040333450427299; terminals('22', '2') = 0.2370033002561276; 
terminals('23', '1') = 0.4737347610942271; terminals('23', '2') = 0.570456233000507; 
terminals('24', '1') = 0.503677403785491; terminals('24', '2') = 0.7914791866115298; 
terminals('25', '1') = 0.2666028786773571; terminals('25', '2') = 0.5196882918794326; 
terminals('26', '1') = 0.19407196147120864; terminals('26', '2') = 0.9210870782577825; 
terminals('27', '1') = 0.5696077945299985; terminals('27', '2') = 0.3749209623697247; 
terminals('28', '1') = 0.756350205260637; terminals('28', '2') = 0.2449235593193667; 
terminals('29', '1') = 0.7412339190326014; terminals('29', '2') = 0.06987564260071699; 
terminals('30', '1') = 0.12287179899447731; terminals('30', '2') = 0.14876797990328172; 
terminals('31', '1') = 0.8979805866344233; terminals('31', '2') = 0.7319084443498269; 
terminals('32', '1') = 0.9908345832447267; terminals('32', '2') = 0.11723461256288359; 
terminals('33', '1') = 0.021107141956515196; terminals('33', '2') = 0.6979826248556068; 
terminals('34', '1') = 0.19041190794037666; terminals('34', '2') = 0.909190115180055; 
terminals('35', '1') = 0.9898269534803196; terminals('35', '2') = 0.026427100295887684; 
terminals('36', '1') = 0.9757979336328032; terminals('36', '2') = 0.30655249713327526; 
terminals('37', '1') = 0.8222147265575847; terminals('37', '2') = 0.27465302906031164; 
terminals('38', '1') = 0.04309160600295314; terminals('38', '2') = 0.9006645915962306; 
terminals('39', '1') = 0.13465188733254707; terminals('39', '2') = 0.8017433480233876; 
terminals('40', '1') = 0.9239119603245699; terminals('40', '2') = 0.38504401788591225; 
terminals('41', '1') = 0.6360139460011341; terminals('41', '2') = 0.7899577180756273; 
terminals('42', '1') = 0.039632716419590874; terminals('42', '2') = 0.3621872023719651; 
terminals('43', '1') = 0.03538880484126383; terminals('43', '2') = 0.533816658508353; 
terminals('44', '1') = 0.6209249947026906; terminals('44', '2') = 0.2876844397714109; 
terminals('45', '1') = 0.01373214444738502; terminals('45', '2') = 0.36859395942978124; 
terminals('46', '1') = 0.8186253105710998; terminals('46', '2') = 0.8773811142092716; 
terminals('47', '1') = 0.6926786291379595; terminals('47', '2') = 0.07536780707000446; 
terminals('48', '1') = 0.030015653659281938; terminals('48', '2') = 0.25955129083150497; 
terminals('49', '1') = 0.4040743838932823; terminals('49', '2') = 0.43069180889254854; 
terminals('50', '1') = 0.2765634121798767; terminals('50', '2') = 0.9483771067525653; 
terminals('51', '1') = 0.41133081929982074; terminals('51', '2') = 0.47317893381092957; 
terminals('52', '1') = 0.3462874237780289; terminals('52', '2') = 0.6463576989223804; 
terminals('53', '1') = 0.43678402165992103; terminals('53', '2') = 0.4711142635778607; 
terminals('54', '1') = 0.7169682791008521; terminals('54', '2') = 0.9822690274938141; 
terminals('55', '1') = 0.8727673659299415; terminals('55', '2') = 0.18253953268135759; 
terminals('56', '1') = 0.1164244970382623; terminals('56', '2') = 0.6768814874788983; 
terminals('57', '1') = 0.9366011120091551; terminals('57', '2') = 0.7400260955011981; 
terminals('58', '1') = 0.4777369676637401; terminals('58', '2') = 0.11370474789455098; 
terminals('59', '1') = 0.8871809552721311; terminals('59', '2') = 0.22184352582246814; 
terminals('60', '1') = 0.06617894946755143; terminals('60', '2') = 0.4373818886306805; 
terminals('61', '1') = 0.08009667882563709; terminals('61', '2') = 0.434607897869844; 
terminals('62', '1') = 0.7359967517777332; terminals('62', '2') = 0.34148223695482005; 
terminals('63', '1') = 0.08579556057816329; terminals('63', '2') = 0.061295750027627105; 
terminals('64', '1') = 0.5673652357975401; terminals('64', '2') = 0.3274543647487249; 
terminals('65', '1') = 0.8921763181964708; terminals('65', '2') = 0.30116302158985286; 
terminals('66', '1') = 0.656819054276212; terminals('66', '2') = 0.05912756812047926; 
terminals('67', '1') = 0.7322213860749016; terminals('67', '2') = 0.014597734432438392; 
terminals('68', '1') = 0.9161835060208605; terminals('68', '2') = 0.35793777666749893; 
terminals('69', '1') = 0.8600436696767008; terminals('69', '2') = 0.03284279341146379; 
terminals('70', '1') = 0.41248247172366204; terminals('70', '2') = 0.2668269972034041; 
terminals('71', '1') = 0.04543152244666793; terminals('71', '2') = 0.33712091891802287; 
terminals('72', '1') = 0.8413020122862993; terminals('72', '2') = 0.22948584928680404; 
terminals('73', '1') = 0.4451288000391407; terminals('73', '2') = 0.034484872465413985; 
terminals('74', '1') = 0.38727525276137575; terminals('74', '2') = 0.7304359675707757; 
terminals('75', '1') = 0.01609630537240614; terminals('75', '2') = 0.0965758027554483; 
terminals('76', '1') = 0.926807954935802; terminals('76', '2') = 0.20706739698424326; 
terminals('77', '1') = 0.3733415835840722; terminals('77', '2') = 0.8840128426759072; 
terminals('78', '1') = 0.9747267989750326; terminals('78', '2') = 0.7062042123085374; 
terminals('79', '1') = 0.3408224356669314; terminals('79', '2') = 0.19027453101743352; 
terminals('80', '1') = 0.1920225208517945; terminals('80', '2') = 0.2535502942122395; 
terminals('81', '1') = 0.9983955243722825; terminals('81', '2') = 0.9497253041024195; 
terminals('82', '1') = 0.6308161534354492; terminals('82', '2') = 0.6369228256275805; 
terminals('83', '1') = 0.9794402790151073; terminals('83', '2') = 0.5063649243298969; 
terminals('84', '1') = 0.022637057905539604; terminals('84', '2') = 0.8971552120950502; 
terminals('85', '1') = 0.35370176832119793; terminals('85', '2') = 0.24305746450918453; 
terminals('86', '1') = 0.09291032700610391; terminals('86', '2') = 0.8606058961071116; 
terminals('87', '1') = 0.3600796898522586; terminals('87', '2') = 0.8877639472171982; 
terminals('88', '1') = 0.4708696470412803; terminals('88', '2') = 0.8098509204580512; 
terminals('89', '1') = 0.43812896848274174; terminals('89', '2') = 0.08097670436679705; 
terminals('90', '1') = 0.38240152256770166; terminals('90', '2') = 0.979881495279819; 
terminals('91', '1') = 0.027731760330307553; terminals('91', '2') = 0.4965649120893857; 
terminals('92', '1') = 0.03623749035626522; terminals('92', '2') = 0.24861861883360648; 
terminals('93', '1') = 0.19127935073319013; terminals('93', '2') = 0.05995605375252955; 
terminals('94', '1') = 0.9497636623581043; terminals('94', '2') = 0.8528580306954243; 
terminals('95', '1') = 0.638592198852282; terminals('95', '2') = 0.1200549227338904; 
terminals('96', '1') = 0.1167702207914234; terminals('96', '2') = 0.025889532720060116; 
terminals('97', '1') = 0.4607433618203982; terminals('97', '2') = 0.6699114078783563; 
terminals('98', '1') = 0.166521477224446; terminals('98', '2') = 0.48238318305252414; 
terminals('99', '1') = 0.5540538617616398; terminals('99', '2') = 0.7723099873200233; 
terminals('100', '1') = 0.019784811424884863; terminals('100', '2') = 0.4583316248321333; 
terminals('101', '1') = 0.9142208742349259; terminals('101', '2') = 0.4534374223718214; 
terminals('102', '1') = 0.9002528286123126; terminals('102', '2') = 0.4781017168616374; 
terminals('103', '1') = 0.5229972456700991; terminals('103', '2') = 0.8700864919510888; 
terminals('104', '1') = 0.43359687527786006; terminals('104', '2') = 0.4448648922969206; 
terminals('105', '1') = 0.94521677241998; terminals('105', '2') = 0.4381501405669741; 
terminals('106', '1') = 0.6416338237947428; terminals('106', '2') = 0.339928791170101; 
terminals('107', '1') = 0.9421143996100635; terminals('107', '2') = 0.12483056646823387; 
terminals('108', '1') = 0.4081023031205083; terminals('108', '2') = 0.8646336424291626; 
terminals('109', '1') = 0.4272393825727636; terminals('109', '2') = 0.1812521545404343; 
terminals('110', '1') = 0.908384113733725; terminals('110', '2') = 0.3318713351898226; 
terminals('111', '1') = 0.1121238058322489; terminals('111', '2') = 0.7508297398351014; 
terminals('112', '1') = 0.9445732992398143; terminals('112', '2') = 0.703195162648304; 
terminals('113', '1') = 0.2192089745539444; terminals('113', '2') = 0.8954178054335532; 
terminals('114', '1') = 0.780837088991169; terminals('114', '2') = 0.9748516745821113; 
terminals('115', '1') = 0.4986259293389391; terminals('115', '2') = 0.8889405015684829; 
terminals('116', '1') = 0.6471177106804326; terminals('116', '2') = 0.35620775107476554; 
terminals('117', '1') = 0.5011448089012559; terminals('117', '2') = 0.2488694702802684; 
terminals('118', '1') = 0.17080945179949647; terminals('118', '2') = 0.29669010779211913; 
terminals('119', '1') = 0.25378763546539485; terminals('119', '2') = 0.05914626257355826; 
terminals('120', '1') = 0.3351322688139584; terminals('120', '2') = 0.04527426061116424; 
terminals('121', '1') = 0.48614583536652556; terminals('121', '2') = 0.7049295228643461; 
terminals('122', '1') = 0.04333632991845382; terminals('122', '2') = 0.4424078299190728; 
terminals('123', '1') = 0.9829606068776199; terminals('123', '2') = 0.9701284024649148; 
terminals('124', '1') = 0.8060327152928329; terminals('124', '2') = 0.1708858666986861; 
terminals('125', '1') = 0.6408032073635666; terminals('125', '2') = 0.5137112199944673; 
Parameter bigM / 1.4142135623730951 /;
Positive Variables distance_Steiner_Steiner(i,ii), distance_Steiner_terminal(i,j), Steiner_points(i,k);
Steiner_points.up(i,k) = 1; distance_Steiner_Steiner.up(i,ii) = bigM; distance_Steiner_terminal.up(i,j) = bigM;
Binary Variables is_connected_Steiner_Steiner(i,ii), is_connected_Steiner_terminal(i,j);
Variable objective;
Equations objective_definition, distance_Steiner_Steiner_def(i,ii), distance_Steiner_terminal_def(i,j), assignment(j), cardinality(i), Steiner_connectivity(i);
objective_definition.. objective =e= sum(i, sum(ii$(ord(i)<ord(ii)), distance_Steiner_Steiner(i,ii)) + sum(j, distance_Steiner_terminal(i,j)));
distance_Steiner_Steiner_def(i,ii)$(ord(i)<ord(ii)).. distance_Steiner_Steiner(i,ii) =g= sqrt(sum(k, power(Steiner_points(i,k) - Steiner_points(ii,k), 2))) - bigM * (1 - is_connected_Steiner_Steiner(i,ii));
distance_Steiner_terminal_def(i,j).. distance_Steiner_terminal(i,j) =g= sqrt(sum(k, power(Steiner_points(i,k) - terminals(j,k), 2))) - bigM * (1 - is_connected_Steiner_terminal(i,j));
assignment(j).. sum(i, is_connected_Steiner_terminal(i,j)) =e= 1;
cardinality(i).. sum(j, is_connected_Steiner_terminal(i,j)) + sum(ii$(ord(ii)<ord(i)), is_connected_Steiner_Steiner(ii,i)) + sum(ii$(ord(i)<ord(ii)), is_connected_Steiner_Steiner(i,ii)) =e= 3;
Steiner_connectivity(i)$(ord(i)>1).. sum(ii$(ord(ii)<ord(i)), is_connected_Steiner_Steiner(ii,i)) =e= 1;
Model m / all /;
Solve m using minlp minimizing objective;
