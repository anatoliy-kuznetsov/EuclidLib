Sets
i facilities / 1*4 /
j communities / 1*100 /;
Parameters community_x(j), community_y(j), demand(j), capacity(i);
community_x('1') = 0.9599609301949554; community_y('1') = 0.2001687781917959;
community_x('2') = 0.8718636870225728; community_y('2') = 0.05464249392064402;
community_x('3') = 0.7319052947366839; community_y('3') = 0.5062353440045189;
community_x('4') = 0.22762240760795194; community_y('4') = 0.22910833737749492;
community_x('5') = 0.3306423277165249; community_y('5') = 0.530787281051697;
community_x('6') = 0.7138106236242713; community_y('6') = 0.2377505189155077;
community_x('7') = 0.8067094148524617; community_y('7') = 0.1965253778484095;
community_x('8') = 0.016723259631372334; community_y('8') = 0.48795263475124073;
community_x('9') = 0.16669374037482987; community_y('9') = 0.07164094498049034;
community_x('10') = 0.8954049583306892; community_y('10') = 0.8846093512359138;
community_x('11') = 0.11811652091402602; community_y('11') = 0.5625700137547939;
community_x('12') = 0.6553288605324686; community_y('12') = 0.3953004421709936;
community_x('13') = 0.3297044066246436; community_y('13') = 0.5498210793089819;
community_x('14') = 0.6455021356110294; community_y('14') = 0.9473243134651627;
community_x('15') = 0.8622742310394873; community_y('15') = 0.494344897985171;
community_x('16') = 0.5815203656026335; community_y('16') = 0.39416394964103385;
community_x('17') = 0.3911423011512376; community_y('17') = 0.21683685426907928;
community_x('18') = 0.3223240073562874; community_y('18') = 0.3803909168627011;
community_x('19') = 0.6214264048007021; community_y('19') = 0.7737763219680155;
community_x('20') = 0.6283132605188567; community_y('20') = 0.6130133453152588;
community_x('21') = 0.40957941890300076; community_y('21') = 0.27572768235212153;
community_x('22') = 0.4663486886426993; community_y('22') = 0.8985202350683462;
community_x('23') = 0.5363295990515825; community_y('23') = 0.13334796952895656;
community_x('24') = 0.2583443519581471; community_y('24') = 0.3558256703615601;
community_x('25') = 0.1797112812232593; community_y('25') = 0.7761191023771385;
community_x('26') = 0.5685805085231823; community_y('26') = 0.9151538622139157;
community_x('27') = 0.10027849702779801; community_y('27') = 0.45918972776041234;
community_x('28') = 0.5977736024975815; community_y('28') = 0.011121706482006721;
community_x('29') = 0.8017963701780383; community_y('29') = 0.5608257969481014;
community_x('30') = 0.8280675795917687; community_y('30') = 0.427067077803426;
community_x('31') = 0.2522718128677095; community_y('31') = 0.02943386332693032;
community_x('32') = 0.41479363547168446; community_y('32') = 0.3487976679796977;
community_x('33') = 0.9233980854758448; community_y('33') = 0.8820742849526506;
community_x('34') = 0.34989285188258157; community_y('34') = 0.037422475930268706;
community_x('35') = 0.9915575201923567; community_y('35') = 0.1779987749765659;
community_x('36') = 0.1999632553267282; community_y('36') = 0.16710944091882884;
community_x('37') = 0.840742178966493; community_y('37') = 0.7977589825072285;
community_x('38') = 0.04096568168763104; community_y('38') = 0.30749268628245296;
community_x('39') = 0.6675775607001265; community_y('39') = 0.6845670868521359;
community_x('40') = 0.8055471315182255; community_y('40') = 0.6751568712946117;
community_x('41') = 0.5475907361308185; community_y('41') = 0.012062073228644277;
community_x('42') = 0.6327074179957147; community_y('42') = 0.4379569689477081;
community_x('43') = 0.9137795732874802; community_y('43') = 0.11907798233919575;
community_x('44') = 0.9963210981233577; community_y('44') = 0.7994632537806623;
community_x('45') = 0.1793239106276422; community_y('45') = 0.4893135362003791;
community_x('46') = 0.5226820422903651; community_y('46') = 0.36847326338916553;
community_x('47') = 0.03986560954193785; community_y('47') = 0.8124224669773792;
community_x('48') = 0.3785326855748523; community_y('48') = 0.8223044116760511;
community_x('49') = 0.1450922747117781; community_y('49') = 0.06821638549462172;
community_x('50') = 0.16025298246799136; community_y('50') = 0.09483857270039031;
community_x('51') = 0.6248364705020321; community_y('51') = 0.32302367541273236;
community_x('52') = 0.08448505447923471; community_y('52') = 0.31289215737421483;
community_x('53') = 0.1540070926531555; community_y('53') = 0.44084761202091705;
community_x('54') = 0.009795309077122893; community_y('54') = 0.42746142830773515;
community_x('55') = 0.8135387204521112; community_y('55') = 0.9723719544726598;
community_x('56') = 0.24369718226302317; community_y('56') = 0.6712904559155161;
community_x('57') = 0.07228757047427603; community_y('57') = 0.9613779649683655;
community_x('58') = 0.6210218039255742; community_y('58') = 0.6182898188635938;
community_x('59') = 0.717571224405712; community_y('59') = 0.23368014507798174;
community_x('60') = 0.6305407794582544; community_y('60') = 0.567616137653444;
community_x('61') = 0.5474171078086943; community_y('61') = 0.159940824701429;
community_x('62') = 0.5345846428576146; community_y('62') = 0.58415932448405;
community_x('63') = 0.7195795508583578; community_y('63') = 0.1427471388907252;
community_x('64') = 0.3102628143569818; community_y('64') = 0.9308124290588764;
community_x('65') = 0.8426256758212418; community_y('65') = 0.30331206010873146;
community_x('66') = 0.6938665809106261; community_y('66') = 0.894340983708023;
community_x('67') = 0.8581867805230271; community_y('67') = 0.22019707272355882;
community_x('68') = 0.8905659967876581; community_y('68') = 0.20785842801324572;
community_x('69') = 0.8396402857168077; community_y('69') = 0.24621923170924398;
community_x('70') = 0.5191654013953313; community_y('70') = 0.8236054189477088;
community_x('71') = 0.52234180058499; community_y('71') = 0.8279470244165784;
community_x('72') = 0.7336873339023745; community_y('72') = 0.745143438596122;
community_x('73') = 0.5790707378455092; community_y('73') = 0.5748638050437215;
community_x('74') = 0.027919421001486255; community_y('74') = 0.14580366121640376;
community_x('75') = 0.9169201927095375; community_y('75') = 0.2385307530711539;
community_x('76') = 0.19908763304141563; community_y('76') = 0.03254862730124741;
community_x('77') = 0.4844181901265677; community_y('77') = 0.930398019634245;
community_x('78') = 0.45238073263236944; community_y('78') = 0.1279745416075211;
community_x('79') = 0.09328986102885062; community_y('79') = 0.715710019465528;
community_x('80') = 0.578259440093927; community_y('80') = 0.000761589897712911;
community_x('81') = 0.5903197533464001; community_y('81') = 0.28469927369008685;
community_x('82') = 0.8131003297102863; community_y('82') = 0.6032085080679733;
community_x('83') = 0.612166491541089; community_y('83') = 0.18272513307799;
community_x('84') = 0.30657263176371463; community_y('84') = 0.06970131810946234;
community_x('85') = 0.5649173170261642; community_y('85') = 0.8958662517798713;
community_x('86') = 0.9591782776070477; community_y('86') = 0.28707578906343845;
community_x('87') = 0.6366570299392306; community_y('87') = 0.006594232692659463;
community_x('88') = 0.8438012425225161; community_y('88') = 0.7044113076853196;
community_x('89') = 0.011316101384011179; community_y('89') = 0.9892346543366667;
community_x('90') = 0.6895906613899916; community_y('90') = 0.5451821283722633;
community_x('91') = 0.21122183650296378; community_y('91') = 0.03515893329685438;
community_x('92') = 0.16280390612673012; community_y('92') = 0.41757936867909773;
community_x('93') = 0.33120031313155207; community_y('93') = 0.6092961098509432;
community_x('94') = 0.17784859418297827; community_y('94') = 0.24470834500889183;
community_x('95') = 0.0857099010502329; community_y('95') = 0.41705044635411315;
community_x('96') = 0.21104762595117443; community_y('96') = 0.741513067817837;
community_x('97') = 0.23041089519083302; community_y('97') = 0.6576122466443551;
community_x('98') = 0.24943803691265065; community_y('98') = 0.8313278542453487;
community_x('99') = 0.7988706058848997; community_y('99') = 0.9503150966910855;
community_x('100') = 0.08319121401196394; community_y('100') = 0.5188630834293065;
demand('1') = 0.981038874473116;
demand('2') = 0.11750113942215368;
demand('3') = 0.5175622694687941;
demand('4') = 0.6755340644950576;
demand('5') = 0.9285725344117343;
demand('6') = 0.4702736605878488;
demand('7') = 0.4365857965105735;
demand('8') = 0.8916413584507225;
demand('9') = 0.4703223161575467;
demand('10') = 0.05777775972615351;
demand('11') = 0.4514761401064804;
demand('12') = 0.2700050221198097;
demand('13') = 0.6559010415671167;
demand('14') = 0.8163127212032084;
demand('15') = 0.04706230311343562;
demand('16') = 0.31662322336156046;
demand('17') = 0.899643067290368;
demand('18') = 0.8092336332320297;
demand('19') = 0.783386306204234;
demand('20') = 0.3890616603674105;
demand('21') = 0.95425348229745;
demand('22') = 0.8483286519163523;
demand('23') = 0.8188810548319586;
demand('24') = 0.5436189323294652;
demand('25') = 0.6411314734321958;
demand('26') = 0.13190281853494024;
demand('27') = 0.03537915129264768;
demand('28') = 0.014830771761806805;
demand('29') = 0.05410038347317836;
demand('30') = 0.5098124309956716;
demand('31') = 0.9449033608650981;
demand('32') = 0.5755068817567212;
demand('33') = 0.7879744907874319;
demand('34') = 0.7544822907346681;
demand('35') = 0.9444107043543971;
demand('36') = 0.27654438551599914;
demand('37') = 0.49712875546027613;
demand('38') = 0.9247028237455366;
demand('39') = 0.330113974823956;
demand('40') = 0.6979283809550169;
demand('41') = 0.41255431313904;
demand('42') = 0.1531526279961133;
demand('43') = 0.20313859229194964;
demand('44') = 0.35985167751854696;
demand('45') = 0.0288001513363374;
demand('46') = 0.8818680298317229;
demand('47') = 0.3552767866902101;
demand('48') = 0.2408180330649896;
demand('49') = 0.8002414540105467;
demand('50') = 0.00562880995556958;
demand('51') = 0.7619743207138365;
demand('52') = 0.4500481056447433;
demand('53') = 0.08994377219969918;
demand('54') = 0.3977141269009493;
demand('55') = 0.9861151988016336;
demand('56') = 0.039572582378825105;
demand('57') = 0.28410827326198995;
demand('58') = 0.17814041393708513;
demand('59') = 0.591677934496845;
demand('60') = 0.19894033298455127;
demand('61') = 0.8484266461817915;
demand('62') = 0.3644212163757554;
demand('63') = 0.950248441875458;
demand('64') = 0.1214576528820156;
demand('65') = 0.22982426440111092;
demand('66') = 0.02674920272998549;
demand('67') = 0.044525906269527904;
demand('68') = 0.1834637328631089;
demand('69') = 0.5875905875271242;
demand('70') = 0.5505509623437503;
demand('71') = 0.7262630436716923;
demand('72') = 0.23388812538468462;
demand('73') = 0.598923032649066;
demand('74') = 0.9844503039005765;
demand('75') = 0.3212850835867511;
demand('76') = 0.23519250083367926;
demand('77') = 0.18568249020855787;
demand('78') = 0.96521351924265;
demand('79') = 0.6365732265957109;
demand('80') = 0.4940505242304586;
demand('81') = 0.49563138170884746;
demand('82') = 0.07959207923029554;
demand('83') = 0.2253491722774208;
demand('84') = 0.6997195895553942;
demand('85') = 0.2516981137449803;
demand('86') = 0.5137541427010263;
demand('87') = 0.9042158317930321;
demand('88') = 0.18313161151752777;
demand('89') = 0.47226414496742763;
demand('90') = 0.7624912197613344;
demand('91') = 0.7441155079378973;
demand('92') = 0.8263690299391173;
demand('93') = 0.9105513173451455;
demand('94') = 0.5774512469791199;
demand('95') = 0.22576333375573387;
demand('96') = 0.509529181957284;
demand('97') = 0.9270008504963847;
demand('98') = 0.19833037907480366;
demand('99') = 0.2938429813560697;
demand('100') = 0.19734930354874614;
capacity('1') = 26.021790972621666;
capacity('2') = 2.8786312937044785;
capacity('3') = 4.48844596157502;
capacity('4') = 18.03797561042372;
Positive Variables x(i), y(i), shipment_quantities(i,j);
x.up(i) = 1; y.up(i) = 1;
Variable objective;
Equations objective_definition, capacity_limit(i), demand_satisfaction(j);
objective_definition.. objective =e= sum(i, sum(j, shipment_quantities(i,j) * (power(x(i) - community_x(j), 2) + power(y(i) - community_y(j), 2))));
capacity_limit(i).. sum(j, shipment_quantities(i,j)) =l= capacity(i);
demand_satisfaction(j).. sum(i, shipment_quantities(i,j)) =e= demand(j);
Model m / all /;
Solve m using nlp minimizing objective;
