Sets
i facilities / 1*3 /
j communities / 1*100 /;
Parameters community_x(j), community_y(j);
community_x('1') = 0.9790501200727744; community_y('1') = 0.6311424951878402;
community_x('2') = 0.45629827629184827; community_y('2') = 0.06672245148451761;
community_x('3') = 0.7188470341002364; community_y('3') = 0.02813370989019326;
community_x('4') = 0.7348862425853395; community_y('4') = 0.8816599278452203;
community_x('5') = 0.21490166849706338; community_y('5') = 0.6269013861862501;
community_x('6') = 0.07803796911512406; community_y('6') = 0.16286095537542633;
community_x('7') = 0.6027432362671394; community_y('7') = 0.42873962092903517;
community_x('8') = 0.12191950272268226; community_y('8') = 0.2890755666151287;
community_x('9') = 0.382226634481309; community_y('9') = 0.8692874521904679;
community_x('10') = 0.8897028218070439; community_y('10') = 0.28624094722515714;
community_x('11') = 0.8721502920634506; community_y('11') = 0.7244247415495613;
community_x('12') = 0.1186890489541742; community_y('12') = 0.7437850500651989;
community_x('13') = 0.08223395893075858; community_y('13') = 0.31875884096460017;
community_x('14') = 0.22248607563414302; community_y('14') = 0.2521011029699466;
community_x('15') = 0.8280911145578295; community_y('15') = 0.521112501873431;
community_x('16') = 0.02472447636767583; community_y('16') = 0.3997225002105538;
community_x('17') = 0.2251828459038958; community_y('17') = 0.5939809266576113;
community_x('18') = 0.10723676302623708; community_y('18') = 0.32815695404043954;
community_x('19') = 0.12763824766271537; community_y('19') = 0.7945040151126441;
community_x('20') = 0.5234249852126434; community_y('20') = 0.42030230269801994;
community_x('21') = 0.18343173523148326; community_y('21') = 0.136143099207385;
community_x('22') = 0.40944334015947625; community_y('22') = 0.774531308143275;
community_x('23') = 0.7331857650038027; community_y('23') = 0.8950296042756412;
community_x('24') = 0.7229955321011505; community_y('24') = 0.6811637100991619;
community_x('25') = 0.41503758152257597; community_y('25') = 0.5465191428386663;
community_x('26') = 0.7861348290536645; community_y('26') = 0.87178894698042;
community_x('27') = 0.5725075138461647; community_y('27') = 0.9337948530254415;
community_x('28') = 0.8269601510284041; community_y('28') = 0.009262756401185124;
community_x('29') = 0.2488818696593572; community_y('29') = 0.4876950675248043;
community_x('30') = 0.36912357958085673; community_y('30') = 0.018982468776048256;
community_x('31') = 0.5803349928449376; community_y('31') = 0.3335241239631539;
community_x('32') = 0.9458939112226394; community_y('32') = 0.24183404147594545;
community_x('33') = 0.618339929803488; community_y('33') = 0.4613823719890262;
community_x('34') = 0.4747024910574612; community_y('34') = 0.677298801963296;
community_x('35') = 0.25095823937637995; community_y('35') = 0.8608494707743931;
community_x('36') = 0.2813337214794214; community_y('36') = 0.260828760842044;
community_x('37') = 0.21578669367558911; community_y('37') = 0.011735861364977063;
community_x('38') = 0.9863645026702189; community_y('38') = 0.9990458234862235;
community_x('39') = 0.8865853309878791; community_y('39') = 0.7821203148917139;
community_x('40') = 0.8945620392234958; community_y('40') = 0.5503418933063282;
community_x('41') = 0.5285688951098176; community_y('41') = 0.11239191602793763;
community_x('42') = 0.708384487952824; community_y('42') = 0.052377433607805;
community_x('43') = 0.29648914964070017; community_y('43') = 0.9341294850788631;
community_x('44') = 0.48157049590943335; community_y('44') = 0.5293556030905174;
community_x('45') = 0.14554146029922255; community_y('45') = 0.8600456625304761;
community_x('46') = 0.420140098875878; community_y('46') = 0.7836717817794422;
community_x('47') = 0.252703353163125; community_y('47') = 0.7511054492094982;
community_x('48') = 0.09997671456057478; community_y('48') = 0.8052510810051834;
community_x('49') = 0.9194440793102199; community_y('49') = 0.2533792755981428;
community_x('50') = 0.09668337434887231; community_y('50') = 0.24611947874178752;
community_x('51') = 0.8129312296053264; community_y('51') = 0.43371140947157627;
community_x('52') = 0.69957905129295; community_y('52') = 0.7676310918513006;
community_x('53') = 0.0900544025434653; community_y('53') = 0.7942401639657729;
community_x('54') = 0.48515271892966294; community_y('54') = 0.7574483929568191;
community_x('55') = 0.9958643028455554; community_y('55') = 0.5795352889383328;
community_x('56') = 0.9868623533325966; community_y('56') = 0.4767439909083834;
community_x('57') = 0.5633005482415795; community_y('57') = 0.19425040789890158;
community_x('58') = 0.7718094743437608; community_y('58') = 0.6666443342600646;
community_x('59') = 0.7086747540781035; community_y('59') = 0.6536254702356696;
community_x('60') = 0.29177285745744364; community_y('60') = 0.5144679134132856;
community_x('61') = 0.5499369537631748; community_y('61') = 0.726777937936861;
community_x('62') = 0.596939821696328; community_y('62') = 0.9792846384007238;
community_x('63') = 0.39405641988972406; community_y('63') = 0.9435855472981566;
community_x('64') = 0.8189990872832278; community_y('64') = 0.10714435097363662;
community_x('65') = 0.44421356366434817; community_y('65') = 0.2874586706743091;
community_x('66') = 0.7494891352136963; community_y('66') = 0.6129812821515095;
community_x('67') = 0.06468637419158274; community_y('67') = 0.6897257530243619;
community_x('68') = 0.4448860941734385; community_y('68') = 0.28449710521756644;
community_x('69') = 0.04443656150056341; community_y('69') = 0.9307717790464919;
community_x('70') = 0.6468354932652288; community_y('70') = 0.4608658507473642;
community_x('71') = 0.8726582006369804; community_y('71') = 0.7652199544751623;
community_x('72') = 0.5434607583258384; community_y('72') = 0.052316469397973964;
community_x('73') = 0.5653919967842793; community_y('73') = 0.27910238121665565;
community_x('74') = 0.6224904598210145; community_y('74') = 0.02247631649979287;
community_x('75') = 0.229051149892618; community_y('75') = 0.7910496903784138;
community_x('76') = 0.38625690455774275; community_y('76') = 0.5219004509746287;
community_x('77') = 0.5785186297030117; community_y('77') = 0.9528110034877589;
community_x('78') = 0.6462821339816298; community_y('78') = 0.6067764925944034;
community_x('79') = 0.38006243875752277; community_y('79') = 0.32501439221768036;
community_x('80') = 0.4773778129689302; community_y('80') = 0.3565933083195064;
community_x('81') = 0.33078861302885243; community_y('81') = 0.37500196195238944;
community_x('82') = 0.5542981262906839; community_y('82') = 0.19803228322354316;
community_x('83') = 0.6759728791955966; community_y('83') = 0.10790031453323568;
community_x('84') = 0.32776733692609294; community_y('84') = 0.649698771312504;
community_x('85') = 0.6849969003224811; community_y('85') = 0.31383818211836345;
community_x('86') = 0.8489741551279321; community_y('86') = 0.4536251040305358;
community_x('87') = 0.5364380411417772; community_y('87') = 0.7091773891838592;
community_x('88') = 0.9803725216985771; community_y('88') = 0.2741220008365026;
community_x('89') = 0.30949991491899753; community_y('89') = 0.4397462597339806;
community_x('90') = 0.9195632575532574; community_y('90') = 0.3235817691663315;
community_x('91') = 0.18190096518085497; community_y('91') = 0.32411302414330956;
community_x('92') = 0.36343488491763387; community_y('92') = 0.6663092097253003;
community_x('93') = 0.8168528198966378; community_y('93') = 0.09851383090888444;
community_x('94') = 0.0325822956804418; community_y('94') = 0.3995952149437163;
community_x('95') = 0.6144908043611289; community_y('95') = 0.10979848578730689;
community_x('96') = 0.8713165943427151; community_y('96') = 0.6699384226962937;
community_x('97') = 0.9439947803244484; community_y('97') = 0.29790397105454614;
community_x('98') = 0.68218233799177; community_y('98') = 0.9650579074996485;
community_x('99') = 0.3455598885840183; community_y('99') = 0.4827230523144219;
community_x('100') = 0.3322933066434728; community_y('100') = 0.6618767361640094;
Parameters weights(i,j);
weights('1', '1') = 0.04757743061169495; weights('2', '1') = 0.6033596164209931; weights('3', '1') = -0.9030133540106899; 
weights('1', '2') = 0.6394780791596497; weights('2', '2') = -0.45032214767479695; weights('3', '2') = -0.0994254775710679; 
weights('1', '3') = 0.4014527879815011; weights('2', '3') = 0.45708874914641817; weights('3', '3') = 0.6780464192142941; 
weights('1', '4') = 0.28219755397705915; weights('2', '4') = -0.9905344351943943; weights('3', '4') = 0.5175600238600253; 
weights('1', '5') = -0.9359074875462283; weights('2', '5') = -0.7071881638116768; weights('3', '5') = 0.870954232229854; 
weights('1', '6') = -0.7161194907045572; weights('2', '6') = 0.5939239131299787; weights('3', '6') = 0.5579104181084305; 
weights('1', '7') = 0.5018390888072146; weights('2', '7') = 0.7067628289345269; weights('3', '7') = 0.23546405607682797; 
weights('1', '8') = -0.17609143235202374; weights('2', '8') = -0.39285837401370616; weights('3', '8') = 0.20345232358961352; 
weights('1', '9') = 0.951319892230079; weights('2', '9') = -0.6031423663532292; weights('3', '9') = 0.917541087379661; 
weights('1', '10') = 0.27142947751272484; weights('2', '10') = 0.9221572383087198; weights('3', '10') = -0.740925408374228; 
weights('1', '11') = 0.6466054287929697; weights('2', '11') = 0.18420283522615555; weights('3', '11') = 0.040099933397444554; 
weights('1', '12') = 0.49040187773851573; weights('2', '12') = -0.8210839958074938; weights('3', '12') = 0.08974021614548411; 
weights('1', '13') = 0.9262054806864835; weights('2', '13') = 0.9777889651887663; weights('3', '13') = -0.9715481518219955; 
weights('1', '14') = 0.31558999942892063; weights('2', '14') = 0.13199118522910558; weights('3', '14') = 0.7500405604207558; 
weights('1', '15') = 0.8753663295644254; weights('2', '15') = -0.40113402868323034; weights('3', '15') = 0.3595299563633876; 
weights('1', '16') = -0.148609800603142; weights('2', '16') = 0.011805288993129048; weights('3', '16') = -0.32055313215095826; 
weights('1', '17') = -0.46519658933062713; weights('2', '17') = -0.2609934799710829; weights('3', '17') = 0.589651333570347; 
weights('1', '18') = -0.7795946490714665; weights('2', '18') = 0.15508552991283242; weights('3', '18') = -0.04656973985131785; 
weights('1', '19') = -0.49491358264583063; weights('2', '19') = -0.1723435432739333; weights('3', '19') = 0.4529892905557811; 
weights('1', '20') = 0.7884967707175725; weights('2', '20') = -0.2483059498476119; weights('3', '20') = 0.09881326736265583; 
weights('1', '21') = 0.31623697251141647; weights('2', '21') = 0.46369482085396596; weights('3', '21') = 0.7202257743935367; 
weights('1', '22') = -0.9132231522594432; weights('2', '22') = -0.389175459429588; weights('3', '22') = 0.009769302865851648; 
weights('1', '23') = -0.9443019205591285; weights('2', '23') = 0.6605872412794718; weights('3', '23') = -0.8199351835942212; 
weights('1', '24') = -0.0789110362878136; weights('2', '24') = 0.49330932674203387; weights('3', '24') = 0.5260059460666215; 
weights('1', '25') = 0.08892083455211153; weights('2', '25') = 0.8869483212761013; weights('3', '25') = -0.538786613386389; 
weights('1', '26') = -0.278183679523508; weights('2', '26') = -0.691791372781948; weights('3', '26') = 0.14426113449194866; 
weights('1', '27') = -0.960504824922195; weights('2', '27') = 0.7221463975298306; weights('3', '27') = 0.8662684314068607; 
weights('1', '28') = -0.476618467174458; weights('2', '28') = 0.4266449286013583; weights('3', '28') = 0.44741620808208493; 
weights('1', '29') = 0.7537504936543038; weights('2', '29') = -0.6350735581007523; weights('3', '29') = -0.8614936353220333; 
weights('1', '30') = 0.45067478727239885; weights('2', '30') = 0.8227422464569891; weights('3', '30') = 0.6775402044225158; 
weights('1', '31') = 0.6368612887973644; weights('2', '31') = 0.004842603143562663; weights('3', '31') = 0.9325722187733381; 
weights('1', '32') = -0.46086437478232534; weights('2', '32') = -0.6441937522297194; weights('3', '32') = -0.07078600176251948; 
weights('1', '33') = 0.3355292254034272; weights('2', '33') = -0.5805593170328902; weights('3', '33') = -0.49069922016533596; 
weights('1', '34') = -0.6053922108369896; weights('2', '34') = 0.9980990350970607; weights('3', '34') = -0.07299507055487164; 
weights('1', '35') = -0.39653521164765393; weights('2', '35') = 0.6045285781072909; weights('3', '35') = 0.06343410042684638; 
weights('1', '36') = 0.9125118138242785; weights('2', '36') = -0.5327765591942775; weights('3', '36') = -0.9072098522380807; 
weights('1', '37') = -0.5732205107241284; weights('2', '37') = 0.7848092535565092; weights('3', '37') = 0.6941495011203538; 
weights('1', '38') = -0.4149628492697499; weights('2', '38') = -0.9240421584593517; weights('3', '38') = 0.285449095070613; 
weights('1', '39') = -0.5646234339695004; weights('2', '39') = 0.3927303262978208; weights('3', '39') = -0.19949530143788818; 
weights('1', '40') = 0.7365511953476962; weights('2', '40') = 0.26586194766942484; weights('3', '40') = 0.6293422538514115; 
weights('1', '41') = 0.37459686001501447; weights('2', '41') = 0.7385106733445785; weights('3', '41') = -0.6535144574527754; 
weights('1', '42') = 0.18177926259407706; weights('2', '42') = 0.8162577319820583; weights('3', '42') = 0.7795420162805009; 
weights('1', '43') = 0.7019872636343603; weights('2', '43') = 0.463358724988961; weights('3', '43') = 0.7180254365744498; 
weights('1', '44') = -0.07283311596274711; weights('2', '44') = 0.6869737677834877; weights('3', '44') = -0.050305146010493074; 
weights('1', '45') = 0.8318755639204574; weights('2', '45') = -0.07254967547389501; weights('3', '45') = -0.7745348231303206; 
weights('1', '46') = 0.5540895487245756; weights('2', '46') = 0.8670021995133399; weights('3', '46') = -0.10327046525623929; 
weights('1', '47') = -0.4011633331185016; weights('2', '47') = -0.14039962187730892; weights('3', '47') = -0.7884855586790878; 
weights('1', '48') = -0.5279898295155512; weights('2', '48') = 0.45566816289592627; weights('3', '48') = 0.09656669517129202; 
weights('1', '49') = 0.07451845981355731; weights('2', '49') = 0.5018676770856523; weights('3', '49') = -0.7153850862379354; 
weights('1', '50') = -0.1077920098456897; weights('2', '50') = -0.19159862874757905; weights('3', '50') = 0.04011621120972042; 
weights('1', '51') = 0.579648699976475; weights('2', '51') = 0.6397057169303471; weights('3', '51') = -0.18152073577309058; 
weights('1', '52') = 0.3045315276871208; weights('2', '52') = 0.4366665547004063; weights('3', '52') = -0.3538360979666435; 
weights('1', '53') = 0.4851624862791113; weights('2', '53') = -0.6814322166642253; weights('3', '53') = 0.1654570262886128; 
weights('1', '54') = 0.20635939822878657; weights('2', '54') = 0.17473372630700523; weights('3', '54') = 0.06859244616874127; 
weights('1', '55') = -0.4721991754655832; weights('2', '55') = -0.028568719774844764; weights('3', '55') = 0.7643156628896679; 
weights('1', '56') = 0.4879068091301966; weights('2', '56') = 0.1916114139080871; weights('3', '56') = -0.10659025070717765; 
weights('1', '57') = 0.9630647748611163; weights('2', '57') = -0.9417605462302132; weights('3', '57') = 0.1490820209670285; 
weights('1', '58') = 0.2744113977322027; weights('2', '58') = 0.40226910871994526; weights('3', '58') = 0.4549011565894805; 
weights('1', '59') = 0.42189361568746286; weights('2', '59') = -0.20597908049157798; weights('3', '59') = -0.672128610085188; 
weights('1', '60') = -0.5330599456442751; weights('2', '60') = 0.47436375868922864; weights('3', '60') = 0.07464162841170685; 
weights('1', '61') = -0.7640583272897132; weights('2', '61') = -0.5175906966104451; weights('3', '61') = -0.6395834849121096; 
weights('1', '62') = -0.10395032739293897; weights('2', '62') = -0.9589042722109227; weights('3', '62') = -0.009092934485828597; 
weights('1', '63') = 0.18720850024649516; weights('2', '63') = -0.06886789786954473; weights('3', '63') = 0.017641732619782413; 
weights('1', '64') = 0.4544193265031451; weights('2', '64') = 0.2780233311187861; weights('3', '64') = 0.8123877677592859; 
weights('1', '65') = -0.051901615082009744; weights('2', '65') = 0.5571191516899976; weights('3', '65') = 0.9247513729367385; 
weights('1', '66') = 0.08743638276247934; weights('2', '66') = 0.08167384385136511; weights('3', '66') = -0.390159475394392; 
weights('1', '67') = -0.8230140027611477; weights('2', '67') = 0.7608469997380862; weights('3', '67') = 0.7075111381542234; 
weights('1', '68') = -0.9040835394807019; weights('2', '68') = -0.6724900347101077; weights('3', '68') = -0.25515546401986344; 
weights('1', '69') = -0.7567250725309933; weights('2', '69') = -0.7529064103587899; weights('3', '69') = -0.49994162257614927; 
weights('1', '70') = -0.36253660119363973; weights('2', '70') = -0.19317774933747267; weights('3', '70') = 0.1927924514735344; 
weights('1', '71') = -0.5135369688421325; weights('2', '71') = 0.3148325966178185; weights('3', '71') = -0.39511791577003597; 
weights('1', '72') = -0.7142419112157554; weights('2', '72') = 0.5311136301482116; weights('3', '72') = 0.8920443143903669; 
weights('1', '73') = -0.3230931583282939; weights('2', '73') = -0.8696169424276732; weights('3', '73') = 0.8026941423266734; 
weights('1', '74') = -0.32629185932969595; weights('2', '74') = 0.19665090291891896; weights('3', '74') = -0.936183396510412; 
weights('1', '75') = 0.6483456769921756; weights('2', '75') = -0.3006705668426046; weights('3', '75') = 0.9688204575827144; 
weights('1', '76') = 0.8703467387807211; weights('2', '76') = 0.056369000943835124; weights('3', '76') = 0.7769688033788691; 
weights('1', '77') = 0.98758062590747; weights('2', '77') = -0.8032437208862406; weights('3', '77') = -0.7245598929075003; 
weights('1', '78') = 0.47463475836083857; weights('2', '78') = -0.6776058980400947; weights('3', '78') = 0.320257909820131; 
weights('1', '79') = -0.9775268117701121; weights('2', '79') = 0.2740717667391446; weights('3', '79') = 0.11616308212495485; 
weights('1', '80') = -0.5239775913845688; weights('2', '80') = -0.3184358803251237; weights('3', '80') = -0.6826466153456525; 
weights('1', '81') = 0.9979238618545019; weights('2', '81') = 0.9522379581156135; weights('3', '81') = 0.4103368148759028; 
weights('1', '82') = 0.3917567391156451; weights('2', '82') = 0.013445685867261581; weights('3', '82') = -0.979741272737036; 
weights('1', '83') = 0.7157124785856961; weights('2', '83') = -0.30109267163254594; weights('3', '83') = -0.3098845361987954; 
weights('1', '84') = -0.6005816778763482; weights('2', '84') = -0.6255083987013634; weights('3', '84') = 0.01419523592461247; 
weights('1', '85') = -0.5192661716945788; weights('2', '85') = 0.05263287093016866; weights('3', '85') = 0.6045797656853773; 
weights('1', '86') = -0.8037105246337617; weights('2', '86') = 0.022154629940006387; weights('3', '86') = -0.18610905606127748; 
weights('1', '87') = 0.04970370863975093; weights('2', '87') = -0.4876654357384256; weights('3', '87') = -0.4248238873804535; 
weights('1', '88') = -0.2684489694118166; weights('2', '88') = 0.9384583739218371; weights('3', '88') = -0.06105629691665437; 
weights('1', '89') = -0.05843423901561273; weights('2', '89') = 0.017234248636366134; weights('3', '89') = 0.0787434251253456; 
weights('1', '90') = -0.7233526912161692; weights('2', '90') = 0.5453596183987441; weights('3', '90') = -0.1998546090925959; 
weights('1', '91') = -0.9486010096103734; weights('2', '91') = 0.3687400800421361; weights('3', '91') = -0.8068061225132857; 
weights('1', '92') = -0.22761027438385328; weights('2', '92') = 0.6645602143461056; weights('3', '92') = 0.6789607960763802; 
weights('1', '93') = 0.8530786689720256; weights('2', '93') = -0.7936569860320231; weights('3', '93') = -0.5879196205044979; 
weights('1', '94') = 0.3052049374608725; weights('2', '94') = 0.9256626841446531; weights('3', '94') = -0.6265305894834448; 
weights('1', '95') = 0.1432619181688921; weights('2', '95') = 0.19586098156788911; weights('3', '95') = -0.5646248891329422; 
weights('1', '96') = -0.87384340982173; weights('2', '96') = -0.6705702831938911; weights('3', '96') = 0.9288687749078304; 
weights('1', '97') = -0.13311577359653448; weights('2', '97') = 0.1893252436530264; weights('3', '97') = -0.8453713443247195; 
weights('1', '98') = -0.26174662819541994; weights('2', '98') = -0.8855527261263643; weights('3', '98') = 0.24615658508502736; 
weights('1', '99') = 0.26122029853009887; weights('2', '99') = -0.15441668659521346; weights('3', '99') = 0.14403165848014376; 
weights('1', '100') = -0.1943097087351473; weights('2', '100') = -0.8045989517648953; weights('3', '100') = -0.5448305389790657; 
Positive Variables x(i), y(i);
x.up(i) = 1; y.up(i) = 1;
Variable objective;
Equations objective_definition;
objective_definition.. objective =e= sum(i, sum(j, weights(i,j) * sqrt(power(x(i) - community_x(j), 2) + power(y(i) - community_y(j), 2))));
Model m / all /;
Solve m using nlp minimizing objective;
